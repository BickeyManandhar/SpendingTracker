{"ast":null,"code":"var _jsxFileName = \"/Users/bickeymanandhar/Downloads/SpendingTracker/client/src/screens/Shop/ShopScreen.js\",\n    _s = $RefreshSig$();\n\nimport * as React from 'react';\nimport Box from '@mui/material/Box';\nimport { Button, Checkbox, FormControlLabel, Grid, Paper, RadioGroup, TextField, Typography } from '@mui/material';\nimport ItemCard from './ItemCard';\nimport Spinner from '../../components/Spinner/Spinner';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ShopScreen() {\n  _s();\n\n  const navigate = useNavigate();\n  const [product, setProduct] = React.useState([]);\n  const [spinnerMode, setSpinnerMode] = React.useState(false);\n  const [apiFilter, setApiFilter] = React.useState([]);\n  const [selectedFilter, setSelectedFilter] = React.useState(false);\n  const [filteredObjects, setFilteredObjects] = React.useState(null);\n  const [inputValue, setInputValue] = React.useState(null);\n  let filteredRecord = filteredObjects === null || filteredObjects === void 0 ? void 0 : filteredObjects.sort((a, b) => (a === null || a === void 0 ? void 0 : a.extracted_price) < (b === null || b === void 0 ? void 0 : b.extracted_price) ? -1 : 1);\n  let nonFilteredRecord = product === null || product === void 0 ? void 0 : product.sort((a, b) => (a === null || a === void 0 ? void 0 : a.extracted_price) < (b === null || b === void 0 ? void 0 : b.extracted_price) ? -1 : 1);\n  let priceWise = filteredObjects === null ? nonFilteredRecord : filteredRecord;\n\n  const makeAPICall = async selectedFilter => {\n    try {\n      setSpinnerMode(true);\n      const response = await fetch(`http://localhost:7000/getProducts/?filter=${selectedFilter}&search=${inputValue}`, {\n        mode: 'cors'\n      });\n      const data = await response.json();\n      setProduct(data.shopping_results);\n      setSpinnerMode(false);\n    } catch (e) {\n      setSpinnerMode(false);\n      console.log(e);\n    }\n  };\n\n  const getFilters = async () => {\n    try {\n      setSpinnerMode(true);\n      setInputValue(null);\n      setSelectedFilter(false);\n      const response = await fetch(`http://localhost:7000/getFilters`, {\n        mode: 'cors'\n      });\n      const data = await response.json();\n      setApiFilter(data);\n      setSpinnerMode(false);\n    } catch (e) {\n      setSpinnerMode(false);\n      console.log(e);\n    }\n  };\n\n  const getText = async value => {\n    if (value === null || (value === null || value === void 0 ? void 0 : value.length) <= 1 || value === undefined || value === '') setInputValue(null);else setInputValue(value);\n    setSpinnerMode(true);\n    const response = await fetch(`http://localhost:7000/getProducts/?filter=${selectedFilter}&search=${inputValue}`, {\n      mode: 'cors'\n    });\n    const data = await response.json();\n    setProduct(data.shopping_results);\n    setSpinnerMode(false);\n  };\n\n  const handleCheckBox = val => {\n    setSelectedFilter(val);\n    setFilteredObjects(null);\n  };\n\n  React.useEffect(() => {\n    getText(inputValue);\n  }, [inputValue]);\n  React.useEffect(() => {\n    getFilters();\n  }, []);\n  React.useEffect(() => {\n    makeAPICall(selectedFilter);\n  }, [selectedFilter]);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    children: /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 1,\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        xs: 12,\n        children: /*#__PURE__*/_jsxDEV(Paper, {\n          sx: {\n            marginX: 2,\n            marginY: 3,\n            minHeight: '80vh'\n          },\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            width: '100%',\n            children: [/*#__PURE__*/_jsxDEV(Spinner, {\n              spinnerMode: spinnerMode\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              mx: 4,\n              pb: 4,\n              children: /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 2,\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  md: 12,\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    onClick: () => navigate('/'),\n                    children: \"Back\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 104,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 103,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  md: 12,\n                  children: /*#__PURE__*/_jsxDEV(TextField, {\n                    placeholder: \"Search Product...\",\n                    fullWidth: true,\n                    type: \"text\",\n                    onKeyUp: e => getText(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 108,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  md: 2.5,\n                  children: [(selectedFilter || inputValue) && /*#__PURE__*/_jsxDEV(Box, {\n                    p: 2,\n                    mb: 2,\n                    children: /*#__PURE__*/_jsxDEV(Button, {\n                      sx: {\n                        width: '100%'\n                      },\n                      variant: 'contained',\n                      onClick: getFilters,\n                      children: \"Reset Filter\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 118,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 117,\n                    columnNumber: 23\n                  }, this), apiFilter === null || apiFilter === void 0 ? void 0 : apiFilter.map((item, index) => {\n                    var _item$options;\n\n                    return /*#__PURE__*/_jsxDEV(Box, {\n                      borderRadius: 2,\n                      border: '1px solid gray',\n                      p: 2,\n                      mb: 2,\n                      children: [/*#__PURE__*/_jsxDEV(Typography, {\n                        children: item.type\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 136,\n                        columnNumber: 27\n                      }, this), item === null || item === void 0 ? void 0 : (_item$options = item.options) === null || _item$options === void 0 ? void 0 : _item$options.map((el, index) => {\n                        return /*#__PURE__*/_jsxDEV(Box, {\n                          children: /*#__PURE__*/_jsxDEV(RadioGroup, {\n                            \"aria-labelledby\": \"demo-radio-buttons-group-label\",\n                            defaultValue: \"female\",\n                            name: \"radio-buttons-group\",\n                            children: /*#__PURE__*/_jsxDEV(FormControlLabel, {\n                              onClick: () => handleCheckBox(el.tbs),\n                              control: /*#__PURE__*/_jsxDEV(Checkbox, {\n                                checked: el.tbs === selectedFilter && true\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 148,\n                                columnNumber: 39\n                              }, this),\n                              label: el.text\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 145,\n                              columnNumber: 35\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 140,\n                            columnNumber: 33\n                          }, this)\n                        }, index, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 139,\n                          columnNumber: 31\n                        }, this);\n                      })]\n                    }, index, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 129,\n                      columnNumber: 25\n                    }, this);\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  md: 9.5,\n                  children: /*#__PURE__*/_jsxDEV(Grid, {\n                    container: true,\n                    spacing: 2,\n                    children: priceWise === null || priceWise === void 0 ? void 0 : priceWise.map((el, index) => {\n                      return /*#__PURE__*/_jsxDEV(Grid, {\n                        item: true,\n                        xs: 12,\n                        sm: 4,\n                        md: 3,\n                        lg: 3,\n                        xl: 2,\n                        children: /*#__PURE__*/_jsxDEV(ItemCard, {\n                          title: el.title,\n                          thumbnail: el.thumbnail,\n                          price: el.price,\n                          tag: el.tag,\n                          rating: el.rating,\n                          reviews: el.reviews,\n                          extensions: el.extensions,\n                          source: el.source,\n                          delivery: el.delivery\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 177,\n                          columnNumber: 29\n                        }, this)\n                      }, index, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 168,\n                        columnNumber: 27\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 102,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ShopScreen, \"2FrHPOJOt7jmpzY4G5U3AOOfXbk=\", false, function () {\n  return [useNavigate];\n});\n\n_c = ShopScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShopScreen\");","map":{"version":3,"sources":["/Users/bickeymanandhar/Downloads/SpendingTracker/client/src/screens/Shop/ShopScreen.js"],"names":["React","Box","Button","Checkbox","FormControlLabel","Grid","Paper","RadioGroup","TextField","Typography","ItemCard","Spinner","useNavigate","ShopScreen","navigate","product","setProduct","useState","spinnerMode","setSpinnerMode","apiFilter","setApiFilter","selectedFilter","setSelectedFilter","filteredObjects","setFilteredObjects","inputValue","setInputValue","filteredRecord","sort","a","b","extracted_price","nonFilteredRecord","priceWise","makeAPICall","response","fetch","mode","data","json","shopping_results","e","console","log","getFilters","getText","value","length","undefined","handleCheckBox","val","useEffect","marginX","marginY","minHeight","target","width","map","item","index","type","options","el","tbs","text","title","thumbnail","price","tag","rating","reviews","extensions","source","delivery"],"mappings":"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","sourcesContent":["import * as React from 'react'\nimport Box from '@mui/material/Box'\nimport {\n  Button,\n  Checkbox,\n  FormControlLabel,\n  Grid,\n  Paper,\n  RadioGroup,\n  TextField,\n  Typography,\n} from '@mui/material'\nimport ItemCard from './ItemCard'\nimport Spinner from '../../components/Spinner/Spinner'\nimport { useNavigate } from 'react-router-dom'\n\nexport default function ShopScreen() {\n  const navigate = useNavigate()\n\n  const [product, setProduct] = React.useState([])\n  const [spinnerMode, setSpinnerMode] = React.useState(false)\n  const [apiFilter, setApiFilter] = React.useState([])\n\n  const [selectedFilter, setSelectedFilter] = React.useState(false)\n  const [filteredObjects, setFilteredObjects] = React.useState(null)\n  const [inputValue, setInputValue] = React.useState(null)\n\n  let filteredRecord = filteredObjects?.sort((a, b) =>\n    a?.extracted_price < b?.extracted_price ? -1 : 1,\n  )\n  let nonFilteredRecord = product?.sort((a, b) =>\n    a?.extracted_price < b?.extracted_price ? -1 : 1,\n  )\n\n  let priceWise = filteredObjects === null ? nonFilteredRecord : filteredRecord\n\n  const makeAPICall = async (selectedFilter) => {\n    try {\n      setSpinnerMode(true)\n      const response = await fetch(`http://localhost:7000/getProducts/?filter=${selectedFilter}&search=${inputValue}`,{ mode: 'cors' },)\n      const data = await response.json()\n      setProduct(data.shopping_results)\n      setSpinnerMode(false)\n    } catch (e) {\n      setSpinnerMode(false)\n      console.log(e)\n    }\n  }\n\n  const getFilters = async () => {\n    try {\n      setSpinnerMode(true)\n      setInputValue(null)\n      setSelectedFilter(false)\n      const response = await fetch(`http://localhost:7000/getFilters`, {mode: 'cors'})\n      const data = await response.json()\n      setApiFilter(data)\n      setSpinnerMode(false)\n    } catch (e) {\n      setSpinnerMode(false)\n      console.log(e)\n    }\n  }\n\n  const getText = async (value) => {\n    if (value === null || value?.length <= 1 || value === undefined || value === '')\n      setInputValue(null)\n    else setInputValue(value)\n\n    setSpinnerMode(true)\n    const response = await fetch(`http://localhost:7000/getProducts/?filter=${selectedFilter}&search=${inputValue}`, { mode: 'cors' })\n    const data = await response.json()\n    setProduct(data.shopping_results)\n    setSpinnerMode(false)\n  }\n\n  const handleCheckBox = (val) => {\n    setSelectedFilter(val)\n    setFilteredObjects(null)\n  }\n\n  React.useEffect(() => {\n    getText(inputValue)\n  },[inputValue])\n\n  React.useEffect(() => {\n    getFilters()\n  }, [])\n\n  React.useEffect(() => {\n    makeAPICall(selectedFilter)\n  }, [selectedFilter])\n\n  return (\n    <Box>\n      <Grid container spacing={1}>\n        <Grid item xs={12}>\n          <Paper sx={{ marginX: 2, marginY: 3, minHeight: '80vh' }}>\n            <Box width={'100%'}>\n              <Spinner spinnerMode={spinnerMode} />\n              <Box mx={4} pb={4}>\n                <Grid container spacing={2}>\n                  <Grid item md={12}>\n                    <Button onClick={() => navigate('/')}>Back</Button>\n                  </Grid>\n                  <Grid item md={12}>\n                    {/* <select id=\"mySelect\" onchange=\"setTimeout(myFunction, 5000);\"> */}\n                    <TextField\n                      placeholder=\"Search Product...\"\n                      fullWidth\n                      type=\"text\"\n                      onKeyUp={(e) => getText(e.target.value)}\n                    />\n                  </Grid>\n                  <Grid item md={2.5}>\n                    {(selectedFilter || inputValue) && (\n                      <Box p={2} mb={2}>\n                        <Button\n                          sx={{ width: '100%' }}\n                          variant={'contained'}\n                          onClick={getFilters}\n                        >\n                          Reset Filter\n                        </Button>\n                      </Box>\n                    )}\n                    {apiFilter?.map((item, index) => {\n                      return (\n                        <Box\n                          key={index}\n                          borderRadius={2}\n                          border={'1px solid gray'}\n                          p={2}\n                          mb={2}\n                        >\n                          <Typography>{item.type}</Typography>\n                          {item?.options?.map((el, index) => {\n                            return (\n                              <Box key={index}>\n                                <RadioGroup\n                                  aria-labelledby=\"demo-radio-buttons-group-label\"\n                                  defaultValue=\"female\"\n                                  name=\"radio-buttons-group\"\n                                >\n                                  <FormControlLabel\n                                    onClick={() => handleCheckBox(el.tbs)}\n                                    control={\n                                      <Checkbox\n                                        checked={\n                                          el.tbs === selectedFilter && true\n                                        }\n                                      />\n                                    }\n                                    label={el.text}\n                                  />\n                                </RadioGroup>\n                              </Box>\n                            )\n                          })}\n                        </Box>\n                      )\n                    })}\n                  </Grid>\n                  <Grid item md={9.5}>\n                    <Grid container spacing={2}>\n                      {priceWise?.map((el, index) => {\n                        return (\n                          <Grid\n                            key={index}\n                            item\n                            xs={12}\n                            sm={4}\n                            md={3}\n                            lg={3}\n                            xl={2}\n                          >\n                            <ItemCard\n                              title={el.title}\n                              thumbnail={el.thumbnail}\n                              price={el.price}\n                              tag={el.tag}\n                              rating={el.rating}\n                              reviews={el.reviews}\n                              extensions={el.extensions}\n                              source={el.source}\n                              delivery={el.delivery}\n                            />\n                          </Grid>\n                        )\n                      })}\n                    </Grid>\n                  </Grid>\n                </Grid>\n              </Box>\n            </Box>\n          </Paper>\n        </Grid>\n      </Grid>\n    </Box>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}